{"mappings":"AAAA,MAAM;IACF,YAAY,MAAM,CAAE;QAChB,IAAI,CAAC,UAAU;QAEf,IAAI,CAAC,OAAO;YAAC,GAAG;YAAK,GAAG;QAAG;IAC/B;IAEA,SAAS;QACL,MAAM,IAAI,MAAM,OAAO,OAAO,KAAO,MAAM,OAAO,OAAO,MAAM;QAC/D,MAAM,QAAQ;YACV,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK;YAC3B,GAAG;YACH,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK;QAChC;QAEA,MAAM,IAAI,MAAM,OAAO,OAAO,KAAO,MAAM,OAAO,OAAO,MAAM;QAC/D,MAAM,UAAU;YACZ,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK;YACnD,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK;YAC3B,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK;QACvD;QAEA,IAAI,YAAY;YACZ,GAAG,MAAM,IAAI,QAAQ;YACrB,GAAG,MAAM,IAAI,QAAQ;YACrB,GAAG,MAAM,IAAI,QAAQ;QACzB;QAEA,YAAY,UAAU;QAEtB,MAAM,IAAI,UAAU,IAAI;QACxB,MAAM,IAAI,CAAC,UAAU,IAAI;QACzB,MAAM,IAAI,CAAC,UAAU,IAAI;QAEzB,IAAI,CAAC,QAAQ,OAAO,WAAW;YAAC,CAAC,IAAI,CAAC,KAAK;YAAG,CAAC,IAAI,CAAC,KAAK;YAAG;SAAE;QAE9D,IAAI,MAAM,MAAM,cACZ,IAAI,CAAC;IAEb;IAEA,WAAW;QACP,IAAI,CAAC,KAAK,KAAK,MAAM,MAAM,MAAM,IAAI;QACrC,IAAI,CAAC,KAAK,KAAK,MAAM,MAAM,MAAM,IAAI;QAErC,MAAM,QAAQ,CAAC,OAAO,KAAK,MAAQ,QAAQ,MAAM,MAAM,QAAQ,MAAM,MAAM;QAC3E,MAAM,UAAU,CAAC,MAAQ,MAAM,KAAK,KAAK;QAEzC,IAAI,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,KAAK,GAAG,QAAQ,KAAK,QAAQ;IAC1D;AACJ","sources":["src/CameraPivotController.js"],"sourcesContent":["class CameraPivotController {\n    constructor(object) {\n        this._object = object\n\n        this._rot = {x: 0.0, y: 0.0}\n    }\n\n    update() {\n        const h = input.getKey(\"A\") ? -1.0 : input.getKey(\"D\") ? 1.0 : 0.0\n        const right = {\n            x: Math.cos(this._rot.x) * h,\n            y: 0.0,\n            z: -Math.sin(this._rot.x) * h,\n        }\n    \n        const v = input.getKey(\"S\") ? -1.0 : input.getKey(\"W\") ? 1.0 : 0.0\n        const forward = {\n            x: Math.sin(this._rot.x) * Math.cos(this._rot.y) * v,\n            y: Math.sin(this._rot.y) * v,\n            z: Math.cos(this._rot.x) * Math.cos(this._rot.y) * v,\n        }\n    \n        let direction = {\n            x: right.x + forward.x,\n            y: right.y + forward.y,\n            z: right.z + forward.z,\n        }\n    \n        direction = normalize(direction)\n\n        const x = direction.x * 0.05\n        const y = -direction.y * 0.05\n        const z = -direction.z * 0.05\n\n        this._object.parent.rotation = [-this._rot.y, -this._rot.x, 0]\n\n        if (input.mouse.isHoldButton) {\n            this._looking()\n        }\n    }\n\n    _looking() {\n        this._rot.x += input.mouse.delta.x * 0.01\n        this._rot.y += input.mouse.delta.y * 0.01\n\n        const clamp = (value, min, max) => value < min ? min : value > max ? max : value\n        const deg2Rad = (deg) => deg * Math.PI / 180\n\n        this._rot.y = clamp(this._rot.y, deg2Rad(15), deg2Rad(75))\n    }\n}"],"names":[],"version":3,"file":"index.34a95545.js.map","sourceRoot":"/__parcel_source_root/"}